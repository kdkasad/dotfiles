#!/bin/sh

[ x"$@" = x ] \
	&& echo "${0##*/}: must specify output file" && exit 1

ffmpeg \
	-hwaccel vaapi \
	-threads $(nproc) \
	-f x11grab \
	-s "$(xdpyinfo | grep -m 1 dimensions | grep -o '[0-9]\{1,4\}x[0-9]\{1,4\}' | sed 1q)" \
	-i "$DISPLAY" \
	"$@"
