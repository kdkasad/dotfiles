#!/bin/sh

# Start screen locker
slock &

# Don't sleep if /tmp/nosleep exists
if [ -e /tmp/nosleep ]; then
	printf '%s exists. Not sleeping.\n' /tmp/nosleep >&2
	exit 0
fi

if grep Charging /sys/class/power_supply/BAT0/status >/dev/null 2>&1; then
	systemctl suspend
else
	systemctl suspend
fi
