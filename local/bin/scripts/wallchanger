#!/bin/sh

#
# Sets wallpaper based on the current time
#

# load required session environment
source "${XDG_RUNTIME_DIR:-/run/user/$(id -un)}/session-env"

# directory where images are located
wpdir="${WP_DIR:-$HOME/pictures/wallpapers/dynamic/current}/"

# command to run to set wallpaper
wpcmd="${WP_CMD:-bgs}"

wpnum="$(find "$wpdir" -maxdepth 1 -mindepth 1 -type f -name '*.jpg' | wc -l)"

# get image number to use
index=$(printf "%0.2d" "$(expr $(date +%H) / '(' 24 / $wpnum ')')")

$wpcmd $wpdir/$index.jpg
