#!/bin/sh

if [ "$1" = "-g" ]; then
	shift
	CHOOSER="dmenu -i -l 30 $@"
	VIEWER="$TERMINAL -e man"
else
	CHOOSER="fzf +x --reverse --height=60% $@"
	VIEWER="man"
fi

man -k . | $CHOOSER | awk '{print $2 $1}' | tr -d '(' | tr ')' ' ' |
	xargs -r $VIEWER
